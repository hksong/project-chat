<% layout('boilerplate') -%>
<div class="row">
  <div class="col-md-8 col-md-offset-2"> 
    <form id="updateForm" action="/users/<%=user.id%>?_method=put" class="jumbotron" method="POST">
      <h2>Change Password</h2>
      <div class="form-group">
        <label for="curUsername">Username:</label>
        <input type="text" class="form-control" name="user[username]" id="curUsername" value="<%=user.username%>" readonly>
      </div>
      <div class="form-group">
        <label for="curPassword">Current Password:</label>
        <input type="password" class="form-control" name="user[password]" id="curPassword" autofocus required>
      </div>
      <div class="form-group has-feedback">
        <label for="newPassword" class="control-label">New Password:</label>
        <input type="password" class="form-control" name="user[newPassword]" id="newPassword" required>
      </div>
      <div class="form-group has-feedback">
        <label for="verifyNewPassword" class="control-label">Verify New Password:</label>
        <input type="password" class="form-control" id="verifyNewPassword" required>
      </div>
      <button type="submit" class="btn btn-default" id="updateButton">Update Password</button>
    </form>
    <% if (alerts) { %>
      <div class="alert alert-danger alert-dismissible" role="alert">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <strong>Warning!</strong> <%=alerts%>
      </div>
    <% } %>
  </div> 
</div>

<script src="../../js/validate.js"></script>
<script>
  $(function() {
    validate("#updateForm", "#updateButton", "#newPassword", "#verifyNewPassword");
  });
</script>